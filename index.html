<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Meta tags for social media banners, these should be filled in appropriatly as they are your "business card" -->
  <!-- Replace the content tag with appropriate information -->
  <meta name="description" content="RaR">
  <meta property="og:title" content="Reinforcement Learning from Human Feedback with Active Queries"/>
  <meta property="og:description" content="We propose an active learning based direct preference optimization method"/>
  <meta property="og:url" content="https://uclaml.github.io/PDE/"/>
  

  <meta name="twitter:title" content="Rephrase and Respond: Let Large Language Models Ask Better Questions for Themselves">
  <meta name="twitter:description" content="We propose Rephrase and Respond (RaR), which allows LLMs to rephrase and expand questions posed by humans and provide responses in a single prompt.">
  <!-- Keywords for your paper to be indexed by-->
  <meta name="keywords" content="LLM, prompting, RaR, Rephrase and Respond">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <title>Reinforcement Learning from Human Feedback with Active Queries</title>
  <link rel="icon" type="image/x-icon" href="static/images/star.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
  rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>
</head>
<body>


  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">Rephrase and Respond: Let Large Language Models Ask Better Questions for Themselves</h1>
            <div class="is-size-5 publication-authors">
              <!-- Paper authors -->
              <span class="author-block">
                <a href="https://sites.google.com/g.ucla.edu/yihedeng/home" target="_blank">Yihe Deng</a>,</span>
                <span class="author-block">
                  <a href="https://web.cs.ucla.edu/~weightzero/" target="_blank">Weitong Zhang</a>,</span>
                  <span class="author-block">
                    <a href="https://sites.google.com/view/zxchen/" target="_blank">Zixiang Chen</a>,</span>
                    <span class="author-block">
                      <a href="https://web.cs.ucla.edu/~qgu/" target="_blank">Quanquan Gu</a>
                  </span>
                  </div>

                  <div class="is-size-5 publication-authors">
                    <span class="author-block">University of California, Los Angeles</span>
                  </div>

                  <div class="column has-text-centered">
                    <div class="publication-links">
                         <!-- Arxiv PDF link -->
                      <span class="link-block">
                        <a href="https://arxiv.org/pdf/2311.04205.pdf" target="_blank"
                        class="external-link button is-normal is-rounded is-dark">
                        <span class="icon">
                          <i class="fas fa-file-pdf"></i>
                        </span>
                        <span>Paper</span>
                      </a>
                    </span>

                  <!-- Github link -->
                  <span class="link-block">
                    <a href="https://github.com/uclaml/Rephrase-and-Respond" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>

                <!-- ArXiv abstract Link -->
                <span class="link-block">
                  <a href="https://arxiv.org/abs/2311.04205" target="_blank"
                  class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                    <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Paper abstract -->
<section class="section hero is-light">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Aligning large language models (LLM) with human preference plays a key role in building modern generative models and can be achieved by reinforcement learning from human feedback (RLHF). Despite their superior performance, current RLHF approaches often require a large amount of human-labelled preference data, which is expensive to collect. In this paper, inspired by the success of active learning, we address this problem by proposing query-efficient RLHF methods. We first formalize the alignment problem as a contextual dueling bandit problem and design an active-query-based proximal policy optimization APPO algorithm with a constant regret bound and a constant query complexity. We then propose ADPO, a practical version of our algorithm based on direct preference optimization (DPO) and apply it to fine-tuning LLMs. Our experiments show that ADPO, while only making about half of queries for human preference, matches the performance of the state-of-the-art DPO method.
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End paper abstract -->

<!-- Rephrase and Respond (RaR). -->
<div class="columns is-centered">
  <div class="column is-three-fifths">
    <h2 class="title is-3">Active Direct Preference Optimization</h2>

    <img src="images/demo_RaR.png" alt="MY ALT TEXT"/>
      <h2 class="subtitle has-text-centered">
        The Algorithm of ADPO. In each 
      </h2>
    <!-- RaR -->
    <h3 class="title is-4">(One-step) RaR</h3>
    <div class="content has-text-justified">
      <p>
        Direct Preference Optimization (DPO) has shown good performance in aligning large language models (LLM) with human preference. However, DPO training requires large amount of data (e.g., zephry-7b uses 60k human labeled data for DPO training). We adapt active learning to DPO and propose a label efficient DPO training method.
      </p>
      <!-- <pre><code>
        "{question}"
        Rephrase and expand the question, and respond.
      </code></pre> -->
    </div>
    <br/>
    <!--/ RaR. -->

    <!-- Two-step RaR -->
    <h3 class="title is-4">Uncertainty-based Active Query</h3>
    <div class="content has-text-justified">
      <p>
        For each piece of prompt and the two answers, DPO treat the LLM as a reward model and assign rewards to the answers. Therefore, the difference of the two scores indicates the model's confidence of its prediction of the label. In ADPO, LLM will only queries the laebls of those answer pairs with high uncertainty. For those with low uncertainty, LLM will use its predicted label as its training target.
      </p>
      <!-- <pre><code>
        "{question}"
        Given the above question, rephrase and expand it to help you do better answering. Maintain all information in the original question.
      </code></pre> -->
    </div>
    <!--/ Two-step RaR -->

  </div>
</div>
<!--/ Rephrase and Respond (RaR). -->

<!-- Motivating Example. -->
<div class="columns is-centered">
  <div class="column is-three-fifths">
    <h2 class="title is-3">Experiment Results</h2>
      <div class="content has-text-justified">
        <p>
          Why are we interested in RaR? Let's investigate the following motivating example. 
          When posed with the query, "Was Mother Teresa born on an even month?"" GPT-4 might mistakenly assert that August is an odd month. 
          We take a step further to investigate the intrinsic reason for LLM's inefficiency in answering such questions. 
          As shown in the other three conversations in the figure, when GPT-4 explains its reasoning, 
          it appears that the model has several ambiguities toward the questions. 
          For example, it may consider February as odd due to its irregular number of days and sometimes consider an even/odd month 
          to be months with an even/odd number of days. 
        </p>
        <p>
          In this paper, we highlight an often-overlooked aspect of studies in LLMs: the disparity between human and LLM thought frames. 
          To tackle this problem, we propose to let the LLM to rephrase the question and incorporate additional details for better answering.
          Upon rephrasing by the LLM itself, the newly generated question is more detailed and has a clearer question format, 
          as presented in the figure. This self-rephrasing technique leads to significant improvement in accuracy, 
          as shown in the barplot. 
        </p>
    </div>
  </div>
</div>
<!--/ Motivating Example. -->
<!-- Image carousel -->
<section class="hero is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
       <div class="item">
        <!-- Your image here -->
        <img src="images/demo_even_month.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Ambiguities exist in the human-crafted questions, resulting in LLMs responding to unintended questions.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="images/demo_refine.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          GPT-4's rephrased questions can significantly improve its own performance.
        </h2>
      </div>
    </div>
  </div>
</div>
</div>
</section>
<!-- End image carousel -->

<!-- Results. -->
<div class="columns is-centered">
  <div class="column is-three-fifths">
    <h2 class="title is-3">Results</h2>
      <div class="content has-text-justified">
        <p>
          We investigate the performance of ADPO by comparing the accuracy of GPT-4 with One-step RaR and Two-step RaR. 
          Notably, both One-step RaR and Two-step RaR significantly improve GPT-4's accuracy. 
          Notably, for tasks that GPT-4 originally finds
          highly challenging, RaR exhibits remarkable improvement even to almost 100% accuracy. 
          Indeed, similar to human communication, rephrasing and elaborating a question
          and then answering is an effective approach. In summary: 
        </p>
        <ul>
          <li>(One-step) RaR provides a universal, plug-and-play black-box prompt that allows for efficient and effective performance improvement of LLMs on general tasks.</li>
          <li>Two-step RaR provides a universal method for LLMs to improve the question quality autonomously by rephrasing the question.</li>
          <li>Examining the question quality is pivotal when evaluating the LLM performance on QA tasks.</li>
        </ul>
    </div>
  </div>
</div>
<!--/ Results. -->
<!-- Image carousel -->
<section class="hero is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
       <div class="item">
        <!-- Your image here -->
        <img src="images/tasks.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Overview of the tasks we evaluated on. The table includes tasks we used in later sections.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="images/tasks_res.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Accuracy (%) comparison of different prompts using GPT-4. Both One-step RaR and Two-step RaR
          effectively improve the accuracy of GPT-4 across 10 tasks.
        </h2>
      </div>
    </div>
  </div>
</div>
</div>
</section>
<!-- End image carousel -->

<!-- Results. -->
<div class="columns is-centered">
  <div class="column is-three-fifths">
    <h2 class="title is-4">Performance across Various LLMs</h2>
      <div class="content has-text-justified">
        <p>
          We further examine the performance of RaR on various LLMs, including GPT-3.5 and Vicuna. 
          In particular, we employ Two-step RaR to investigate (1) if all these LLMs can provide consistent 
          response improvement by rephrasing the questions; and (2) if the GPT-4-rephrased questions can improve 
          the performance of other LLMs.
        </p>
        <ul>
          <li>All models can benefit from rephrasing questions, with more advanced models expected to gain a larger improvement.</li>
          <li>The rephrased questions are transferable: the questions rephrased by GPT-4 can improve the response quality on Vicuna.</li>
        </ul>
    </div>
  </div>
</div>
<!--/ Results. -->
<!-- Image carousel -->
<section class="hero is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
       <div class="item">
        <!-- Your image here -->
        <img src="images/models.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Accuracy (%) of GPT-4-0613, GPT-3.5-turbo-0613 and Vicuna-13b when testing on original and self-rephrased questions using Two-step RaR.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="images/models_exp.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Examples of the self-rephrased questions generated by different LLM models.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="images/models_table.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Comparison of GPT-4's rephrased questions with Vicuna's self-rephrased questions.
        </h2>
      </div>
    </div>
  </div>
</div>
</div>
</section>
<!-- End image carousel -->

<!-- Results. -->
<div class="columns is-centered">
  <div class="column is-three-fifths">
    <h2 class="title is-3">Comparison with Chain-of-Thought</h2>
      <div class="content has-text-justified">
        <p>
          We compare RaR with CoT. 
          We present the mathematical formualtions of RaR and CoT and compare them with each other. 
          We also present experimental results to show that (1) RaR offers improvements in scenarios where 
          zero-shot CoT is ineffective; and (2) RaR addresses and corrects the shortcomings inherent in few-shot CoT.
        </p>
    </div>
  </div>
</div>
<!--/ Results. -->
<!-- Image carousel -->
<section class="hero is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
       <div class="item">
        <!-- Your image here -->
        <img src="images/math.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Demonstration of our mathematical formulation of CoT and RaR.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="images/question_quality.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          Demonstration of the importance of question quality as compared to reasoning in the coin flip question.
        </h2>
      </div>
      <div class="item">
        <!-- Your image here -->
        <img src="images/few_shot.png" alt="MY ALT TEXT"/>
        <h2 class="subtitle has-text-centered">
          A badly crafted QA example, as shown in red, result in the LLM following the provided logic but reaching an arbitrary answer. 
          Meanwhile, our prompt can successfully correct the pitfalls in the few-shot examples and improve the robustness and efficacy of few-shot CoT.
        </h2>
      </div>
    </div>
  </div>
</div>
</div>
</section>
<!-- End image carousel -->

<!--BibTex citation -->
  <section class="section" id="BibTeX">
    <div class="container is-max-desktop content">
      <h2 class="title">BibTeX</h2>
      <pre><code>@misc{deng2023rephrase,
        title={Rephrase and Respond: Let Large Language Models Ask Better Questions for Themselves}, 
        author={Yihe Deng and Weitong Zhang and Zixiang Chen and Quanquan Gu},
        year={2023},
        eprint={2311.04205},
        archivePrefix={arXiv},
        primaryClass={cs.CL}
      }</code></pre>
    </div>
</section>
<!--End BibTex citation -->


  <footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">

          <p>
            This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a> which was adopted from the <a href="https://nerfies.github.io" target="_blank">Nerfies</a> project page.
            <br> This website is licensed under a <a rel="license"  href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>

        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Statcounter tracking code -->
  
<!-- You can add a tracker to track page visits by creating an account at statcounter.com -->

    <!-- End of Statcounter Code -->

  </body>
  </html>